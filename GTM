GTM 구글태그 관리자
: 구글에서 만든 태그 (광고나 로그분석 프로그램을 실행시키는 짧은 코드 (EX: 스니펫 snippet))를 효율적으로 관리해주는 툴
  구글애널리틱스의 클릭 이벤트 추적보다 html 문서 편집 없고, 하나의 코드가 여러개의 코드를 대신할 수 있고,
  트리거를 이용해서 복잡한 기능 구현이 가능하다는 장점이 있음.
  웹사이트에 태그 직접 추가하지 않고 애널리틱스, 구글애즈 혹은 외부에 태그를 만든 후 태그의 실행 시점을 지정
  -> 태그 삽입 과정 간소화 + 태그 로드 속도 향상 + 태그 변경 관리 수월
  
  - 태그 관리자 진행
    1. 기본준비
      1) 구글애드워즈 가입
      2) 구글 애널리틱스 가입
      3) 구글애드와 구글애널리틱스를 연결
      4) 구글태그관리자 가입
      5) 구글태그관리자가 애널리틱스 추적코드 관리
      6) 웹사이느테 애널리틱스 대신 태그 관리자 추적 코드 추가
    2. 구글 태그 관리자에서 '구매' 버튼 이벤트 추적
    3. 구글애널리틱스에서 이벤트 정보를 이요해 목표 설정
    4. 만들어진 목표를 구글 애즈에 불러와 전환으로 
    * 컨테이너에 스니펫이라는 js코드 삽입 : 사용자가 사이트 방문하면 컨테이너 스니펫이 태그 트리거하고 지정된 데이터를 구글 애널리틱스로 전송
    

# 페이지 조회 태그 추가하기!
  태그 > 새 태그 > 구글 애널리틱스 선택 > 유니버셜 애널리틱스 선택 > (*관리-속성-속성설정-tranckingID) 입력
  > 데모그래픽 데이터와 리마케팅 이익을 받기 위해 'Enable Display Adversting Features' 선택
  > Track type은 'Page View'
  > 트리거는 '모든 페이지'로 선택한 후 태그 만들기
  > 게시 (미리보기로 확인 후 게시할것!)
  
# 변수 생성 (재사용 가능한 변수 만들어 효율적으로 활용)
  변수 > New > 이름 수정 > 여러 태그에 대해 같은 값을 참조할 수 있도록 유형에서 '상수'선택 (constant)
  > value는 trackingID : 아이디 입력할때 이제 변수 불러오면 됨!
  
# Cross-domain-tracking
  : 여러 웹사이트의 데이터를 google 애널리틱스 보고서 1개에 확인 -> 교차 도메인 추적
  - 먼저, 2개의 상수(또는 재사용이 가능한) 사용자 정의 변수 만들기.
    {{ gaDomain}} : 하위 도메인에서 데이터 손실 안되도록 쿠키를 최상위 도메인으로 작성(변수 만들때 '상수' 선택하고 value는 auto)
    {{gaCrossDomain}} : 변수 이용해 모든 도엠인을 한번에 참조할 수 있으므로, 업데이트마다 모든 도엠인 입력 안해도 됨.
                        '상수'선택 후 value는 도메인 주소(쉼표로 구분해서 여러개 등록 가능)
  - 페이지뷰 태그에서 
    config Tag > More setting > Fields to set > add Field
    > Field Name = cookieDomain
    > 이전에 만들었던 {{gaDomain}}을 value
    > Cross Domain Tracking 선택 > Auto Link Domians
    > 이전에 만들었던 {{gaCrossDomain}} 선택
    > '사용자 해시를 구분 기호로 사용' 필드와 'Decorate Forms'=False
      (여러 도메인에서 검색 문자열과 양식 정보를 전달할 수 있음)
      
    * 데이터 영역 (자바스크립트 객체)
    - 데이터 영역 객체 코드 넣을때 반드시 컨테이너 스니펫 앞에 넣어야함
    - 키-값의 쌍으로 구성 > 애널리틱스에 정보전달하는 트리거 역할 (1. 웹페이지 로드 전 / 2. 데이터 영역 값을 직접 푸시하는 자바스크립트 매소드 이용)
    - 데이터 영역 변수
      : 태그 관리자가 데이터 영역 구현에서 값을 읽어와서 태그, 트리거 및 기타 변수에 전달할 수 있는 방법.
        객체는 키-값 (카테고리, 제목 등과 같은 사물 카테고리)
        - 변수 > new > type = data layer variable
          > 이름 정하고 버전은 최신으로 > 기본설 정 체크박스 선택
          > 스크립트가 깨지고 잘못 설정 되었을 경우, value = no set
        - 해당 페이지의 HTML의 <head>에 <script> dataLayer=[];</script> 빈 영역으로 만들어주기
          > 원하는 버튼에 push
        - 애널리틱스에도 맞춤설정으로 보내기 위해
          관리 > (속성) custom definitions > 맞춤 측정 기준(dimensions) > new > 이름 설정. 범위를 '조회'로 사용중(active)상태
          > 측정기준을 만들면 스니펫 제공됨
            각 스니펫에 측정 기준 정보(일명'색인') 들어감. 애널리틱스 '페이지 조회'태그와 맞춤 측정 기준을 매핑하려면 
            태그관리자에 javascript 의 ga('set','dimensions1' ~~, 'value') //dimesion1 동일하게!
    ==> 태그관리자 > tag > configure > type = event > custom dimension > index와 value 설정 > click 이벤트 트리거
    
  # 버튼 클릭 이벤트 추적!!
    - 사용자 정의 url 변수 설정
      변수 > new > 이름설정 > 버튼 클릭 후 발생하는 url 추적위해 URL로 설정 > url 중 국가명 부분만 추적 위해 구성요소에 '조각(frogment)'
    - 트리거 만들기
      트리거  > new > event = click > type = link click
      > '태그 대기' 선택 후 최대 대기 시간 2000 = 사용자가 버튼 클릭 후 태그 실행되는 시간
      > enable when > page url / contains / 해당 html
      > fire on > click classes / contains / 버튼 클래스명
    - 태그 만들기
      configure tag > track type 은 event > 카테고리 매개변수 이름 원하는대로
      > 액션 알아보기 쉽게 정하기 > 라벨은 앞에 만든 변수 선택 > 이탈률 영향 없게 '비상호작용 조회'를 '거짓'으로
      > fire on > more 선택 후 이전에 만든 click 트리거 선택
      
      
 # 미리보기 !!!
 - 우측 상단 미리보기 클리 > 태그 연결된 url 자동 생성(생성 안되면 메인 url 가져오기)
 - tag assistant 탭과 새로운 탭에 해당 사이트가 열림
 - 액션을 취할때 마다, 트리거에 맞춰서 실행되는 태그들이 tags fired에 보여짐
 - 태그마다 변수와 데이터레이어도 확인 가능함. 어떤 데이터가 푸시되는지 체크 가능
